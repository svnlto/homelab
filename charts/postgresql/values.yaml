---
global:
  annotations: {}

# -- Static iSCSI volume for data persistence across cluster rebuilds
staticVolume:
  enabled: false
  pvName: ""
  volumeHandle: ""
  driver: org.democratic-csi.iscsi
  portal: ""
  iqnPrefix: iqn.2005-10.org.freenas.ctl:csi-
  iqnSuffix: -shared

cluster:
  name: postgresql
  imageName: ghcr.io/tensorchord/cloudnative-vectorchord:17-1.1.1
  instances: 1

  storage:
    storageClass: truenas-iscsi-rwo
    size: 10Gi

  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 1Gi

  postgresql:
    shared_preload_libraries:
      - vchord.so
    parameters:
      shared_buffers: "128MB"
      effective_cache_size: "512MB"
      work_mem: "8MB"
      maintenance_work_mem: "64MB"
      max_connections: "50"

  bootstrap:
    initdb:
      database: seerr
      owner: seerr

# -- Additional databases managed via CNPG Database CR
databases: []
