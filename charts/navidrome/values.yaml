---
global:
  annotations: {}

# -- Navidrome server
navidrome:
  image: deluan/navidrome:0.60.3
  port: 4533
  env:
    - name: ND_MUSICFOLDER
      value: /music
    - name: ND_DATAFOLDER
      value: /data
    - name: ND_SCANNER_SCHEDULE
      value: "@every 1h"
    - name: ND_LOGLEVEL
      value: info
    - name: ND_ENABLETRANSCODINGCONFIG
      value: "false"
    - name: ND_SESSIONTIMEOUT
      value: "24h"
    - name: ND_ENABLEINSIGHTSCOLLECTOR
      value: "false"
    - name: ND_PROMETHEUS_ENABLED
      value: "true"
    - name: ND_PROMETHEUS_METRICSPATH
      value: /metrics
    - name: ND_IMAGECACHESIZE
      value: "500MB"
    - name: ND_TRANSCODINGCACHESIZE
      value: "500MB"
    - name: ND_BACKUP_COUNT
      value: "5"
    - name: ND_BACKUP_SCHEDULE
      value: "@daily"
    - name: ND_BACKUP_PATH
      value: /data/backups
  securityContext:
    runAsUser: 1000
    runAsGroup: 1000
    fsGroup: 1000
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

# -- NFS storage for music library
nfs:
  server: ""
  mountOptions:
    - nfsvers=4.2
    - rsize=131072
    - wsize=131072
    - hard
  volumes: []

# -- iSCSI storage for app data (SQLite-safe)
iscsi:
  driver: org.democratic-csi.iscsi
  storageClassName: truenas-iscsi-rwo
  portal: ""
  iqnPrefix: iqn.2005-10.org.freenas.ctl:csi-
  iqnSuffix: -shared
  volumes: []

# -- CSI storage for app data
csi:
  driver: org.democratic-csi.nfs-fast
  storageClassName: truenas-nfs-fast
  server: ""
  basePath: /mnt/fast/kubernetes/nfs-dynamic
  mountOptions:
    - nfsvers=4
    - nconnect=8
    - hard
    - noatime
    - nodiratime
  volumes: []

# -- Ingress configuration
ingress:
  enabled: false
  domain: ""
  annotations: {}
