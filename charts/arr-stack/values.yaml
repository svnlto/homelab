---
global:
  annotations: {}

timezone: Europe/Berlin

# -- NFS storage for media and scratch
nfs:
  server: ""
  mountOptions:
    - nfsvers=4.2
    - rsize=131072
    - wsize=131072
    - hard
  volumes: []

# -- iSCSI storage for app config volumes (SQLite-safe)
iscsi:
  driver: org.democratic-csi.iscsi
  storageClassName: truenas-iscsi-rwo
  portal: ""
  iqnPrefix: iqn.2005-10.org.freenas.ctl:csi-
  iqnSuffix: -shared
  volumes: []

# -- CSI storage for app config volumes
csi:
  driver: org.democratic-csi.nfs-fast
  storageClassName: truenas-nfs-fast
  server: ""
  basePath: /mnt/fast/kubernetes/nfs-dynamic
  mountOptions:
    - nfsvers=4
    - nconnect=8
    - hard
    - noatime
    - nodiratime
  volumes: []

# -- External secrets configuration
externalSecret:
  refreshInterval: 1h
  secretStoreName: onepassword
  secretStoreKind: ClusterSecretStore
  targetSecretName: arr-secrets
  onePasswordItem: arr-stack-secrets
  keys:
    - WIREGUARD_PRIVATE_KEY
    - WIREGUARD_ADDRESSES
    - RADARR_API_KEY
    - SONARR_API_KEY
    - PROWLARR_API_KEY
    - LIDARR_API_KEY
    - BAZARR_API_KEY
    - JELLYFIN_API_KEY

# -- Downloaders pod (gluetun VPN + download clients)
downloaders:
  gluetun:
    image: qmcgaw/gluetun:v3.41.1@sha256:1a5bf4b4820a879cdf8d93d7ef0d2d963af56670c9ebff8981860b6804ebc8ab
    vpnProvider: protonvpn
    serverCountries: Sweden
    firewallInputPorts: "8701,8080,9696,8191,5030"
    firewallOutboundSubnets: "10.96.0.0/12,10.244.0.0/16"
    resources:
      requests:
        cpu: 50m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 512Mi
  qbittorrent:
    image: lscr.io/linuxserver/qbittorrent:5.1.4-r1-ls431@sha256:043498de39c3dd63eec94360c5ad966a51271d1581070f42cb73ab0cf4776f29
    port: 8701
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 1000m
        memory: 1Gi
  sabnzbd:
    image: lscr.io/linuxserver/sabnzbd:4.5.5-ls244@sha256:1a26f56dfc047b62d5ddc20bc92bdebfbe7c3cb58d2d3523958838a09182d77a
    port: 8080
    resources:
      requests:
        cpu: 100m
        memory: 1Gi
      limits:
        cpu: 1000m
        memory: 2Gi
  slskd:
    image: slskd/slskd:0.24.4@sha256:4031fc99b824ed2eec3bdbd92914fe6071539f3f71f0742052276afc2c69353d
    port: 5030
    resources:
      requests:
        cpu: 50m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 512Mi
  prowlarr:
    image: lscr.io/linuxserver/prowlarr:2.3.0.5236-ls137@sha256:e74a1e093dcc223d671d4b7061e2b4946f1989a4d3059654ff4e623b731c9134
    port: 9696
    resources:
      requests:
        cpu: 50m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 512Mi
  flaresolverr:
    image: ghcr.io/flaresolverr/flaresolverr:v3.4.6@sha256:7962759d99d7e125e108e0f5e7f3cdbcd36161776d058d1d9b7153b92ef1af9e
    port: 8191
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi
  initScratch:
    image: busybox:1.37@sha256:b3255e7dfbcd10cb367af0d409747d511aeb66dfac98cf30e97e87e4207dd76f
    resources:
      requests:
        cpu: 10m
        memory: 32Mi
      limits:
        cpu: 100m
        memory: 64Mi

# -- Arr apps (radarr, sonarr, lidarr, bazarr)
radarr:
  image: lscr.io/linuxserver/radarr:6.0.4.10291-ls293@sha256:6d3e68474ea146f995af98d3fb2cb1a14e2e4457ddaf035aa5426889e2f9249c
  port: 7878
  probePath: /ping
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 1Gi

sonarr:
  image: lscr.io/linuxserver/sonarr:4.0.16.2944-ls303@sha256:37be832b78548e3f55f69c45b50e3b14d18df1b6def2a4994258217e67efb1a1
  port: 8989
  probePath: /ping
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 1Gi

lidarr:
  image: ghcr.io/hotio/lidarr:pr-plugins-3.0.0.4856
  port: 8686
  probePath: /ping
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 1Gi

bazarr:
  image: lscr.io/linuxserver/bazarr:v1.5.5-ls336@sha256:d40ee61030a9afafddfdd58d160281b865bfcad7cb66e920116fd6fd40668cbb
  port: 6767
  probePath: /
  startupInitialDelay: 30
  startupFailureThreshold: 24
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

# -- Recyclarr CronJob
recyclarr:
  image: ghcr.io/recyclarr/recyclarr:8.3.1@sha256:e28f8fd583b3175db64118ec006cc3436f6c8a7c9344520d314f91dc879f6607
  schedule: "0 4 * * 1"
  resources:
    requests:
      cpu: 25m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 256Mi

# -- Buildarr deployment
buildarr:
  image: callum027/buildarr:0.7.8@sha256:57e2343fefe5d5701364b5e93b4985dbf08310d7b152f70556bdaba7e9475447
  resources:
    requests:
      cpu: 25m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 256Mi

glance:
  image: glanceapp/glance:v0.8.4@sha256:6df86a7e8868d1eda21f35205134b1962c422957e42a0c44d4717c8e8f741b1a
  port: 8080
  jellyfinUserName: ""
  jellyfinLibraries:
    - Shows
    - Movies
  resources:
    requests:
      cpu: 25m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 256Mi

# -- Ingress configuration
ingress:
  enabled: false
  domain: ""
  annotations: {}
  hosts: []
