---
# Default scenario â€” runs all verifications across all hosts
# Usage: cd ansible && molecule verify

dependency:
  name: galaxy
  options:
    requirements-file: ${MOLECULE_PROJECT_DIRECTORY}/requirements.yml

driver:
  name: default
  options:
    managed: false

platforms:
  - name: grogu
    groups:
      - proxmox
  - name: truenas-primary
    groups:
      - truenas_primary

provisioner:
  name: ansible
  inventory:
    hosts:
      proxmox:
        hosts:
          grogu:
            ansible_host: 192.168.0.10
            ansible_user: root
            ansible_ssh_common_args: "-o StrictHostKeyChecking=no"
            ansible_python_interpreter: /usr/bin/python3.13
            pci_device_ids: "8086:56a6"
            vfio_blacklist_drivers: [i915, xe]
            intel_arc_pci_addresses: ["0000:05:00.0"]
            intel_arc_vm_ids: [210]
            configure_ixgbe_unsupported_sfp: true
      truenas_primary:
        hosts:
          truenas-primary:
            ansible_host: 192.168.0.13
            ansible_user: truenas_admin
            ansible_become: false
            ansible_python_interpreter: /usr/bin/python3.11
            ansible_ssh_common_args: "-o StrictHostKeyChecking=no"
  env:
    ANSIBLE_CONFIG: ${MOLECULE_PROJECT_DIRECTORY}/ansible.cfg
  playbooks:
    verify: verify.yml

verifier:
  name: ansible
