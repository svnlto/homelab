---
# TrueNAS NFS and SMB Share Configurations
# Based on: docs/truenas-ansible-setup.md

# NFS Shares
nfs_shares:
  - path: /mnt/bulk/media
    comment: "Media for Jellyfin on arr-stack"
    mapall_user: media
    mapall_group: media
    networks:
      - 10.10.10.0/24 # Storage VLAN (primary)
      - 192.168.0.0/24 # LAN (arr-stack)
    ro: false

  - path: /mnt/bulk/photos
    comment: "Photos for Immich"
    mapall_user: immich
    mapall_group: immich
    networks:
      - 10.10.10.0/24 # Storage VLAN (primary)
      - 192.168.0.0/24 # LAN (Immich)
      - 10.0.1.0/24 # Kubernetes cluster network (if Immich runs on k8s)
    ro: false

  - path: /mnt/fast/kubernetes/nfs-dynamic
    comment: "democratic-csi dynamic provisioning"
    maproot_user: root
    maproot_group: wheel
    networks:
      - 10.10.10.0/24 # Storage VLAN
      - 10.0.1.0/24 # Kubernetes cluster network
    ro: false

  - path: /mnt/fast/kubernetes/nfs-static
    comment: "Static PVs for configs"
    maproot_user: root
    maproot_group: wheel
    networks:
      - 10.10.10.0/24 # Storage VLAN
      - 10.0.1.0/24 # Kubernetes cluster network
    ro: false

  - path: /mnt/fast/app-configs/arr-stack
    comment: "arr-stack persistent configs"
    maproot_user: root
    maproot_group: wheel
    networks:
      - 10.10.10.0/24 # Storage VLAN
      - 192.168.0.0/24 # LAN
    ro: false

  - path: /mnt/fast/app-configs/observability
    comment: "Prometheus/Loki data"
    maproot_user: root
    maproot_group: wheel
    networks:
      - 10.10.10.0/24 # Storage VLAN
      - 192.168.0.0/24 # LAN
    ro: false

# SMB Shares
smb_shares:
  - name: TimeMachine
    path: /mnt/bulk/backups/timemachine
    purpose: TIMEMACHINE
    comment: "macOS Time Machine backups"

  - name: Archive
    path: /mnt/bulk/archive
    purpose: DEFAULT_SHARE
    comment: "Manual file archive"

# Users and Groups
storage_users:
  - name: media
    uid: 1000
    gid: 1000
    group: media
    home: /nonexistent
    shell: /usr/sbin/nologin

  - name: immich
    uid: 1001
    gid: 1001
    group: immich
    home: /nonexistent
    shell: /usr/sbin/nologin

storage_groups:
  - name: media
    gid: 1000

  - name: immich
    gid: 1001
