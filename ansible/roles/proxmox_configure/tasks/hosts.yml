---
# Ensure /etc/hosts has correct IP for this node.
# Proxmox cluster and SSL certs depend on hostname resolving correctly.

- name: Ensure /etc/hosts has correct entry for this node
  ansible.builtin.lineinfile:
    path: /etc/hosts
    regexp: '^\d+\.\d+\.\d+\.\d+\s+{{ inventory_hostname }}\.lan\s+{{ inventory_hostname }}$'
    line: "{{ ansible_host }} {{ inventory_hostname }}.lan {{ inventory_hostname }}"
    state: present
